# DNS Privacy and Security Profiles

name: paranoid
description: Maximum privacy and security - aggressive blocking of tracking, telemetry, and potentially malicious domains
category: privacy-focused

# WARNING: This profile blocks aggressively and may break some services!
# Use the standard profile if you experience issues.

# Ad and tracker blocklists
blocklists:
  # Core blocking (from standard profile)
  - name: StevenBlack Unified
    url: https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts
    enabled: true
    description: Comprehensive ad and malware blocking
  
  - name: AdGuard DNS Filter
    url: https://adguardteam.github.io/AdGuardSDNSFilter/Filters/filter.txt
    enabled: true
    description: General purpose ad blocking
  
  # Aggressive malware blocking
  - name: Malware Domain List
    url: https://www.malwaredomainlist.com/hostslist/hosts.txt
    enabled: true
    description: Known malware domains
  
  - name: Phishing Army
    url: https://phishing.army/download/phishing_army_blocklist_extended.txt
    enabled: true
    description: Phishing sites
  
  - name: URLhaus Malware
    url: https://urlhaus.abuse.ch/downloads/hostfile/
    enabled: true
    description: Malware distribution
  
  - name: Cybercrime Tracker
    url: https://cybercrime-tracker.net/all.php
    enabled: true
    description: Active cybercrime infrastructure
  
  # Aggressive tracking protection
  - name: EasyPrivacy
    url: https://v.firebog.net/hosts/Easyprivacy.txt
    enabled: true
    description: Web tracking protection
  
  - name: Disconnect Tracking
    url: https://s3.amazonaws.com/lists.disconnect.me/simple_tracking.txt
    enabled: true
    description: Known tracking domains
  
  - name: Disconnect Advertising
    url: https://s3.amazonaws.com/lists.disconnect.me/simple_ad.txt
    enabled: true
    description: Advertising networks
  
  - name: Privacy-Focused Hosts
    url: https://someonewhocares.org/hosts/zero/hosts
    enabled: true
    description: Comprehensive privacy-focused blocking
  
  # Telemetry blocking (Microsoft, Apple, etc.)
  - name: Windows Telemetry
    url: https://raw.githubusercontent.com/crazy-max/WindowsSpyBlocker/master/data/hosts/spy.txt
    enabled: true
    description: Block Windows telemetry and tracking
  
  - name: Apple Telemetry
    url: https://raw.githubusercontent.com/adversarialtools/apple-telemetry/master/blacklist
    enabled: true
    description: Block Apple telemetry
  
  # Social media tracking and widgets
  - name: Fanboy Social Blocking
    url: https://secure.fanboy.co.nz/fanboy-social.txt
    enabled: true
    description: Block social media tracking widgets
  
  # Smart TV telemetry
  - name: Smart TV Blocklist
    url: https://raw.githubusercontent.com/Perflyst/PiHoleBlocklist/master/SmartTV.txt
    enabled: true
    description: Block smart TV telemetry and ads
  
  # Amazon tracking
  - name: Amazon Tracking
    url: https://raw.githubusercontent.com/Perflyst/PiHoleBlocklist/master/AmazonFireTV.txt
    enabled: true
    description: Block Amazon device tracking
  
  # Additional privacy lists
  - name: Antipopads
    url: https://raw.githubusercontent.com/Yhonay/antipopads/master/hosts
    enabled: true
    description: Block popup ads
  
  - name: Block Suspicious
    url: https://raw.githubusercontent.com/PolishFiltersTeam/KADhosts/master/KADhosts.txt
    enabled: true
    description: Suspicious and fraudulent domains

# Pi-hole settings
settings:
  dns_over_https: false  # Using Unbound for recursive DNS
  dnssec: true  # DNSSEC validation via Unbound
  
  # Maximum privacy
  query_logging: true  # Keep for security analysis, but consider disabling for max privacy
  privacy_level: 3  # Anonymous mode - no client or domain logging in stats
  
  cache_size: 15000  # Larger cache to reduce upstream queries
  blocking_mode: "NXDOMAIN"  # More privacy than NULL
  
  # Rate limiting to prevent DNS amplification attacks
  rate_limit: 1000  # queries per interval
  
  conditional_forwarding:
    enabled: true
    domain: "lan"

# Minimal whitelist - only essential services
whitelist:
  - name: "Critical Updates Only"
    domains:
      - "download.windowsupdate.com"  # Windows security updates
      - "update.microsoft.com"
    reason: "Security patches only"
  
  - name: "Certificate Validation"
    domains:
      - "ocsp.apple.com"  # Apple certificate validation
      - "ocsp.digicert.com"  # Certificate checking
    reason: "Required for HTTPS certificate validation"
  
  # NOTE: You may need to whitelist additional domains for services you use
  # Add them here as needed, but keep the list minimal

# Aggressive regex blocking patterns
regex_patterns:
  - pattern: "^(.+[_.-])?ad[sxv]?[0-9]*[_.-]"
    description: "Block ad subdomains"
    enabled: true
  
  - pattern: "^(.+[_.-])?telemetry[_.-]"
    description: "Block telemetry domains"
    enabled: true
  
  - pattern: "^(.+[_.-])?tracking[_.-]"
    description: "Block tracking domains"
    enabled: true
  
  - pattern: "^(.+[_.-])?analytics?[_.-]"
    description: "Block analytics domains"
    enabled: true
  
  - pattern: "^(.+[_.-])?metrics?[_.-]"
    description: "Block metrics collection"
    enabled: true
  
  - pattern: "^(.+[_.-])?beacon[_.-]"
    description: "Block tracking beacons"
    enabled: true
  
  - pattern: "doubleclick\\.net$"
    description: "Block Google DoubleClick"
    enabled: true
  
  - pattern: "googlesyndication\\.com$"
    description: "Block Google ad syndication"
    enabled: true
  
  - pattern: "googletagmanager\\.com$"
    description: "Block Google Tag Manager (may break some sites)"
    enabled: true
  
  - pattern: "facebook\\.com$|fbcdn\\.net$"
    description: "Block Facebook tracking (will break Facebook)"
    enabled: false  # Enable if you want to block Facebook entirely

# Upstream DNS configuration for maximum privacy
upstream_dns:
  # Use privacy-focused DNS providers as fallback
  # Primary: Unbound recursive resolver (most private)
  # Fallback options (if Unbound fails):
  fallback_servers:
    - "9.9.9.9"  # Quad9 - malware filtering, privacy-focused
    - "149.112.112.112"  # Quad9 secondary
    # Alternative: Cloudflare DNS with malware blocking
    # - "1.1.1.2"
    # - "1.0.0.2"

# Security hardening
security:
  # DNSSEC validation (via Unbound)
  dnssec_validation: true
  
  # Block newly registered domains (often used for phishing)
  block_newly_registered:
    enabled: false  # TODO: Requires additional tooling
    age_threshold_days: 30
  
  # Block domains with suspicious patterns
  suspicious_tld_blocking:
    enabled: false  # TODO: Implement via regex
    blocked_tlds: [".zip", ".tk", ".ml", ".ga", ".cf"]

# Performance tuning for aggressive blocking
performance:
  # Optimize for privacy over performance
  prefetch_domains: false  # Don't prefetch to reduce upstream queries
  serve_stale: true  # Serve stale cache entries to reduce queries
  
  # Cache settings
  cache_negative: true  # Cache NXDOMAIN responses
  negative_ttl: 3600  # Cache negative responses for 1 hour

# Groups
groups:
  paranoid_default:
    enabled: true
    description: "Maximum privacy and security for all devices"

# Notes and warnings
warnings:
  - "This profile blocks aggressively and WILL break some websites and services"
  - "Social media sites may not function properly"
  - "Some embedded videos and images may not load"
  - "Cloud services may have limited functionality"
  - "Smart TVs and IoT devices may lose some features"
  - "Consider whitelisting specific domains you need for daily use"
  - "Start with 'standard' profile and migrate to 'paranoid' gradually"

# Recommended whitelisting workflow
recommended_workflow: |
  1. Apply paranoid profile
  2. Browse normally and note what breaks
  3. Check Pi-hole query log for blocked domains
  4. Whitelist only the specific domains you need
  5. Document your whitelists for future reference
  6. Review and audit whitelists periodically
