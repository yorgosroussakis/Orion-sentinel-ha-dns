# DNS-Only WireGuard Configuration
# Only routes DNS traffic to Pi-hole for ad-blocking

# This is a peer configuration snippet to add in WireGuard-UI
# when creating a new client for DNS-only ad-blocking

[Interface]
PrivateKey = <generated-by-wireguard-ui>
Address = 10.13.13.2/32  # Assigned by WireGuard-UI
DNS = 192.168.8.251  # Use Pi-hole for DNS

[Peer]
PublicKey = <your-server-public-key>
Endpoint = home.example.com:51820  # Your public IP or DDNS
# KEY SETTING: Only route DNS server through VPN
AllowedIPs = 192.168.8.251/32
PersistentKeepalive = 25

# ===============================================
# Use Case: DNS-Only (Ad-Blocking on Mobile)
# ===============================================
#
# What this does:
# - ONLY DNS traffic goes to your home Pi-hole
# - All other traffic uses your normal connection
# - You get ad-blocking wherever you are
# - Minimal battery impact
# - No performance penalty
#
# Best for:
# - Mobile ad-blocking
# - Minimal VPN overhead
# - Users who only want ad-blocking, not remote access
# - Maximum battery life
#
# How it works:
# 1. Your device connects to WireGuard
# 2. DNS queries (only) are routed to your Pi-hole
# 3. Pi-hole blocks ads and returns results
# 4. All other traffic goes directly to internet
#
# What you get:
# ✓ Network-wide ad blocking on mobile
# ✓ Minimal battery usage
# ✓ No performance impact
# ✓ Works on any network (WiFi, cellular)
#
# What you DON'T get:
# ✗ Access to home network services
# ✗ IP masking (your public IP is still visible)
# ✗ Encryption of general traffic
#
# Setup Instructions:
# 1. In WireGuard-UI, create a new peer
# 2. After creation, click "Edit"
# 3. Change AllowedIPs to: 192.168.8.251/32
# 4. Ensure DNS is set to: 192.168.8.251
# 5. Save and download/scan config
#
# Testing:
# 1. Connect to the VPN
# 2. Visit: http://doubleclick.net (should be blocked)
# 3. Check DNS: nslookup google.com (should show 192.168.8.251)
# 4. Check IP: curl ifconfig.me (should show your normal public IP, not home IP)
#
# Performance:
# - Latency: DNS queries ~50-100ms slower (acceptable)
# - Battery: Minimal impact (only DNS traffic)
# - Speed: No impact on downloads/uploads
# - Data usage: Minimal VPN overhead
#
# Limitations:
# - Cannot access home services (use split tunnel for that)
# - Pi-hole must be accessible from internet (via VPN)
# - Some apps may bypass DNS (use system DNS)
#
# Alternative Configuration:
# If you want DNS + ability to access Pi-hole web interface:
#   AllowedIPs = 192.168.8.251/32, 192.168.8.250/32
#
# This allows:
# - DNS through Pi-hole
# - Access to Pi-hole web UI: http://192.168.8.251/admin
# - Access to Grafana: http://192.168.8.250:3000
