# =============================================================================
# Orion Sentinel DNS HA - Primary Node Environment Configuration
# =============================================================================
#
# Primary Node (pi1-dns)
# IP: 192.168.8.250
# Role: MASTER
# Priority: 200
#
# =============================================================================

# Node Identity
HOSTNAME=pi1-dns
NODE_IP=192.168.8.250

# Keepalived HA Configuration
# =============================================================================
NODE_ROLE=MASTER
KEEPALIVED_PRIORITY=200
ROUTER_ID=orion-dns-ha

# Virtual IP Configuration
VIP_ADDRESS=192.168.8.249
VIP_NETMASK=32
NETWORK_INTERFACE=eth1

# VRRP Configuration
VIRTUAL_ROUTER_ID=51
# CRITICAL: VRRP_PASSWORD must be EXACTLY 8 characters (VRRP PASS auth limitation)
VRRP_PASSWORD=oriondns

# Unicast VRRP (recommended for point-to-point HA)
USE_UNICAST_VRRP=true
UNICAST_SRC_IP=192.168.8.250
PEER_IP=192.168.8.251

# Health Check Configuration
# =============================================================================
CHECK_DNS_TARGET=127.0.0.1
CHECK_DNS_FQDN=github.com
CHECK_INTERVAL=5
CHECK_TIMEOUT=3
CHECK_WEIGHT=-20
CHECK_FALL=2
CHECK_RISE=2

# Pi-hole Configuration
# =============================================================================
TZ=UTC
DOMAIN_NAME=lan

# Web admin password - CHANGE THIS!
WEBPASSWORD=changeme_secure_password

# Pi-hole API password
FTLCONF_webserver_api_password=${WEBPASSWORD}

# DNS Upstream - uses local Unbound on port 5335
FTLCONF_dns_upstreams=127.0.0.1#5335
FTLCONF_dns_dnssec=true
FTLCONF_local_ipv4=${NODE_IP}

# DNS listening mode
DNSMASQ_LISTENING=all

# Reverse DNS Configuration
REV_SERVER=true
REV_SERVER_TARGET=192.168.8.1
REV_SERVER_DOMAIN=lan
REV_SERVER_CIDR=192.168.8.0/24

# Unbound Configuration
# =============================================================================
UNBOUND_FORWARD_TLS=
UNBOUND_FORWARD_ZONES=

# Redis (optional)
REDIS_ENABLE=false
REDIS_SERVER=redis:6379
REDIS_PASSWORD=

# Prometheus Pushgateway (optional)
# =============================================================================
PROM_PUSHGATEWAY_URL=
PROM_JOB_NAME=orion_dns_ha
PROM_INSTANCE_LABEL=node-primary

# Loki for log shipping (optional)
# =============================================================================
LOKI_URL=http://192.168.8.100:3100/loki/api/v1/push
