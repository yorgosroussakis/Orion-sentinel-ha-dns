# Two Pi Simple Mode - Active-Passive without HA
# Deploy on Pi1 with: docker compose --profile two-pi-simple --profile pi1 up -d

#####################################
# DEPLOYMENT MODE
#####################################
# This file is for: Mode B - two-pi-simple
# Description: Primary services on Pi1, no secondary services, no keepalived
# Use case: Simple two-Pi setup without high availability, Pi2 is passive standby

#####################################
# HOST CONFIGURATION
#####################################
# Hostname for Pi1 (primary host)
PI1_HOSTNAME=pi1-dns

# Hostname for Pi2 (not used in this mode, but can be set for future use)
PI2_HOSTNAME=pi2-dns

#####################################
# NETWORK CONFIGURATION
#####################################
# Physical network interface (usually eth0)
NETWORK_INTERFACE=eth0

# Network subnet
SUBNET=192.168.8.0/24

# Network gateway
GATEWAY=192.168.8.1

# DNS service IP (Pi1's IP address, no VIP in simple mode)
# Clients should point to this IP for DNS
DNS_IP=192.168.8.11

#####################################
# KEEPALIVED CONFIGURATION
#####################################
# Keepalived is NOT used in two-pi-simple mode
KEEPALIVED_ENABLED=false

#####################################
# PI-HOLE CONFIGURATION
#####################################
# Pi-hole admin password (same on both Pis if you run on Pi2 later)
# SECURITY: Generate with: openssl rand -base64 32
PIHOLE_PASSWORD=CHANGE_ME_REQUIRED

# Timezone
TZ=Europe/London

#####################################
# DNS CONFIGURATION
#####################################
# Upstream DNS server (Unbound primary only in simple mode)
PIHOLE_DNS_PRIMARY=unbound_primary#5335

#####################################
# NEXTDNS FALLBACK CONFIGURATION
#####################################
# NextDNS fallback allows Pi-hole to fall back to NextDNS when Unbound
# fails or times out. This provides an external DNS safety net.
#
# DNS Resolution Chain (when enabled):
#   Clients → Pi-hole → Unbound (primary) → NextDNS (fallback)
#
# To enable fallback:
#   - Set NEXTDNS_DNS_IPV4 to your NextDNS profile endpoint
#   - Pi-hole uses Unbound as primary upstream
#   - Pi-hole uses NextDNS as secondary/fallback upstream
#   - If Unbound fails/times out, queries automatically fall back to NextDNS
#
# To disable fallback (default):
#   - Leave NEXTDNS_DNS_IPV4 empty
#   - Pi-hole uses Unbound only (no external DNS fallback)

# NextDNS IPv4 endpoint (set this to enable fallback)
# Get your profile endpoints from: https://my.nextdns.io
# Example: 45.90.28.0 (for profile ID abc123, use 45.90.28.abc123)
NEXTDNS_DNS_IPV4=

# NextDNS IPv6 endpoint (optional, leave empty to disable IPv6 fallback)
# Example: 2a07:a8c0::ab:cd12
NEXTDNS_DNS_IPV6=

# NextDNS DNS-over-HTTPS URL (optional, for reference/DoH support if stack supports it)
# Example: https://dns.nextdns.io/abc123
NEXTDNS_DOH_URL=

#####################################
# MONITORING & OBSERVABILITY (Optional)
#####################################
# Grafana admin password
# SECURITY: Generate with: openssl rand -base64 32
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_REQUIRED

# Prometheus retention period
PROMETHEUS_RETENTION=30d

#####################################
# SIGNAL NOTIFICATIONS (Optional)
#####################################
# Your phone number registered with Signal (with country code)
SIGNAL_NUMBER=+1234567890

# Recipient phone numbers (comma-separated)
SIGNAL_RECIPIENTS=+1234567890

#####################################
# DOCKER RESOURCE LIMITS
#####################################
# Pi-hole container limits
PIHOLE_CPU_LIMIT=1.0
PIHOLE_MEM_LIMIT=512M

# Unbound container limits
UNBOUND_CPU_LIMIT=0.5
UNBOUND_MEM_LIMIT=256M

#####################################
# ADVANCED SETTINGS
#####################################
# DNS query logging
ENABLE_QUERY_LOGGING=true

# DNSSEC validation
ENABLE_DNSSEC=true
